-- Create Gym Member table
CREATE TABLE GymMember (
    ID INT PRIMARY KEY,
    FirstName VARCHAR(50),
    LastName VARCHAR(50),
    BirthDate DATE,
    Gender VARCHAR(10),
    Phone VARCHAR(15),
    Email VARCHAR(100),
    PaymentHistory TEXT,
    MembershipStatus VARCHAR(50)
);

-- Create Payments table
CREATE TABLE Payments (
    PaymentID INT PRIMARY KEY,
    Amount DECIMAL(10, 2),
    Date DATE,
    GymMemberID INT,
    FOREIGN KEY (GymMemberID) REFERENCES GymMember(ID)
);

-- Create Feedback table
CREATE TABLE Feedback (
    FeedbackID INT PRIMARY KEY,
    Comments TEXT,
    Date DATE,
    ClassID INT,
    GymMemberID INT,
    FOREIGN KEY (ClassID) REFERENCES Class(ID),
    FOREIGN KEY (GymMemberID) REFERENCES GymMember(ID)
);

-- Create Trainer table
CREATE TABLE Trainer (
    ID INT PRIMARY KEY,
    FirstName VARCHAR(50),
    LastName VARCHAR(50),
    Gender VARCHAR(10),
    Experience VARCHAR(100),
    Phone VARCHAR(15),
    Email VARCHAR(100)
);

-- Create Administration table
CREATE TABLE Administration (
    ID INT PRIMARY KEY,
    FirstName VARCHAR(50),
    LastName VARCHAR(50),
    Role VARCHAR(50),
    Email VARCHAR(100)
);

-- Create Class table
CREATE TABLE Class (
    ID INT PRIMARY KEY,
    Name VARCHAR(50),
    Capacity INT,
    Duration TIME,
    Schedule TEXT
);

-- Create Workout Plan table
CREATE TABLE WorkoutPlan (
    ID INT PRIMARY KEY,
    Description TEXT,
    Goals TEXT,
    Duration TIME
);

-- Relationships
-- A Trainer manages multiple Classes
CREATE TABLE Trainer_Manages_Class (
    TrainerID INT,
    ClassID INT,
    PRIMARY KEY (TrainerID, ClassID),
    FOREIGN KEY (TrainerID) REFERENCES Trainer(ID),
    FOREIGN KEY (ClassID) REFERENCES Class(ID)
);

-- Administration handles multiple Classes
CREATE TABLE Administration_Handles_Class (
    AdministrationID INT,
    ClassID INT,
    PRIMARY KEY (AdministrationID, ClassID),
    FOREIGN KEY (AdministrationID) REFERENCES Administration(ID),
    FOREIGN KEY (ClassID) REFERENCES Class(ID)
);

-- A Gym Member books and attends multiple Classes
CREATE TABLE GymMember_Books_Class (
    GymMemberID INT,
    ClassID INT,
    BookingDate DATE,
    PRIMARY KEY (GymMemberID, ClassID),
    FOREIGN KEY (GymMemberID) REFERENCES GymMember(ID),
    FOREIGN KEY (ClassID) REFERENCES Class(ID)
);

-- A Trainer creates multiple Workout Plans
CREATE TABLE Trainer_Creates_WorkoutPlan (
    TrainerID INT,
    WorkoutPlanID INT,
    PRIMARY KEY (TrainerID, WorkoutPlanID),
    FOREIGN KEY (TrainerID) REFERENCES Trainer(ID),
    FOREIGN KEY (WorkoutPlanID) REFERENCES WorkoutPlan(ID)
);

-- A Class is linked to a Workout Plan
CREATE TABLE Class_Has_WorkoutPlan (
    ClassID INT,
    WorkoutPlanID INT,
    PRIMARY KEY (ClassID, WorkoutPlanID),
    FOREIGN KEY (ClassID) REFERENCES Class(ID),
    FOREIGN KEY (WorkoutPlanID) REFERENCES WorkoutPlan(ID)
);
